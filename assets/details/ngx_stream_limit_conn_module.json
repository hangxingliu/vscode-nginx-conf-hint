[
[4,"limit_conn","Sets the shared memory zone and the maximum allowed number of connections for a given key value. When this limit is exceeded, the server will close the connection. For example, the directives","<p>Sets the shared memory zone and the maximum allowed number of connections for a given key value. When this limit is exceeded, the server will close the connection. For example, the directives</p><blockquote class=\"example\"><pre>limit_conn_zone $binary_remote_addr zone=addr:10m;\n\nserver {\n    ...\n    limit_conn addr 1;\n}\n</pre></blockquote><p>allow only one connection per an IP address at a time.</p><p>When several <code>limit_conn</code> directives are specified, any configured limit will apply.</p><p>These directives are inherited from the previous configuration level if and only if there are no <code>limit_conn</code> directives defined on the current level.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_conn</strong> <code><i>zone</i></code> <code><i>number</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>stream</code>, <code>server</code><br></td></tr></tbody></table>"],
[4,"limit_conn_dry_run","Enables the dry run mode. In this mode, the number of connections is not limited, however, in the shared memory zone, the number of excessive connections is accounted as usual.","<p>Enables the dry run mode. In this mode, the number of connections is not limited, however, in the shared memory zone, the number of excessive connections is accounted as usual.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_conn_dry_run</strong> <code>on</code> | <code>off</code>;</code><br></td></tr><tr><th>Default:</th><td><pre>limit_conn_dry_run off;</pre></td></tr><tr><th>Context:</th><td><code>stream</code>, <code>server</code><br></td></tr></tbody></table><p>This directive appeared in version 1.17.6.</p>"],
[4,"limit_conn_log_level","Sets the desired logging level for cases when the server limits the number of connections.","<p>Sets the desired logging level for cases when the server limits the number of connections.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_conn_log_level</strong> <code>info</code> | <code>notice</code> | <code>warn</code> | <code>error</code>;</code><br></td></tr><tr><th>Default:</th><td><pre>limit_conn_log_level error;</pre></td></tr><tr><th>Context:</th><td><code>stream</code>, <code>server</code><br></td></tr></tbody></table>"],
[4,"limit_conn_zone","Sets parameters for a shared memory zone that will keep states for various keys. In particular, the state includes the current number of connections. The `_key_` can contain text, variables, and their combinations (1.11.2). Connections with an empty key value are not accounted. Usage example:","<p>Sets parameters for a shared memory zone that will keep states for various keys. In particular, the state includes the current number of connections. The <code><i>key</i></code> can contain text, variables, and their combinations (1.11.2). Connections with an empty key value are not accounted. Usage example:</p><blockquote class=\"example\"><pre>limit_conn_zone $binary_remote_addr zone=addr:10m;\n</pre></blockquote><p>Here, the key is a client IP address set by the <code>$binary_remote_addr</code> variable. The size of <code>$binary_remote_addr</code> is 4 bytes for IPv4 addresses or 16 bytes for IPv6 addresses. The stored state always occupies 32 or 64 bytes on 32-bit platforms and 64 bytes on 64-bit platforms. One megabyte zone can keep about 32 thousand 32-byte states or about 16 thousand 64-byte states. If the zone storage is exhausted, the server will close the connection.</p><blockquote class=\"note\">Additionally, as part of our <a href=\"http://nginx.com/products/\">commercial subscription</a>, the <a href=\"https://nginx.org/en/docs/http/ngx_http_api_module.html#stream_limit_conns_\">status information</a> for each such shared memory zone can be <a href=\"https://nginx.org/en/docs/http/ngx_http_api_module.html#getStreamLimitConnZone\">obtained</a> or <a href=\"https://nginx.org/en/docs/http/ngx_http_api_module.html#deleteStreamLimitConnZoneStat\">reset</a> with the <a href=\"https://nginx.org/en/docs/http/ngx_http_api_module.html\">API</a> since 1.17.7.</blockquote>",["Additionally, as part of our [commercial subscription](http://nginx.com/products/), the [status information](../http/ngx_http_api_module.html#stream_limit_conns_) for each such shared memory zone can be [obtained](../http/ngx_http_api_module.html#getStreamLimitConnZone) or [reset](../http/ngx_http_api_module.html#deleteStreamLimitConnZoneStat) with the [API](../http/ngx_http_api_module.html) since 1.17.7."],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_conn_zone</strong> <code><i>key</i></code> <code>zone</code>=<code><i>name</i></code>:<code><i>size</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>stream</code><br></td></tr></tbody></table>"],
[5,"<p></p><dl class=\"compact\"><dt id=\"var_limit_conn_status\"><code>$limit_conn_status</code></dt><dd>keeps the result of limiting the number of connections (1.17.6): <code>PASSED</code>, <code>REJECTED</code>, or <code>REJECTED_DRY_RUN</code></dd></dl>"]
]
[
[4,"limit_conn","Sets the shared memory zone and the maximum allowed number of connections for a given key value. When this limit is exceeded, the server will return the [error](#limit_conn_status) in reply to a request. For example, the directives","<p>Sets the shared memory zone and the maximum allowed number of connections for a given key value. When this limit is exceeded, the server will return the <a href=\"https://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn_status\">error</a> in reply to a request. For example, the directives</p><blockquote class=\"example\"><pre>limit_conn_zone $binary_remote_addr zone=addr:10m;\n\nserver {\n    location /download/ {\n        limit_conn addr 1;\n    }\n</pre></blockquote><p>allow only one connection per an IP address at a time.</p><blockquote class=\"note\">In HTTP/2 and SPDY, each concurrent request is considered a separate connection.</blockquote><p>There could be several <code>limit_conn</code> directives. For example, the following configuration will limit the number of connections to the server per a client IP and, at the same time, the total number of connections to the virtual server:</p><blockquote class=\"example\"><pre>limit_conn_zone $binary_remote_addr zone=perip:10m;\nlimit_conn_zone $server_name zone=perserver:10m;\n\nserver {\n    ...\n    limit_conn perip 10;\n    limit_conn perserver 100;\n}\n</pre></blockquote><p>These directives are inherited from the previous configuration level if and only if there are no <code>limit_conn</code> directives defined on the current level.</p>",["In HTTP/2 and SPDY, each concurrent request is considered a separate connection."],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_conn</strong> <code><i>zone</i></code> <code><i>number</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>http</code>, <code>server</code>, <code>location</code><br></td></tr></tbody></table>"],
[4,"limit_conn_dry_run","Enables the dry run mode. In this mode, the number of connections is not limited, however, in the shared memory zone, the number of excessive connections is accounted as usual.","<p>Enables the dry run mode. In this mode, the number of connections is not limited, however, in the shared memory zone, the number of excessive connections is accounted as usual.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_conn_dry_run</strong> <code>on</code> | <code>off</code>;</code><br></td></tr><tr><th>Default:</th><td><pre>limit_conn_dry_run off;</pre></td></tr><tr><th>Context:</th><td><code>http</code>, <code>server</code>, <code>location</code><br></td></tr></tbody></table><p>This directive appeared in version 1.17.6.</p>"],
[4,"limit_conn_log_level","Sets the desired logging level for cases when the server limits the number of connections.","<p>Sets the desired logging level for cases when the server limits the number of connections.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_conn_log_level</strong> <code>info</code> | <code>notice</code> | <code>warn</code> | <code>error</code>;</code><br></td></tr><tr><th>Default:</th><td><pre>limit_conn_log_level error;</pre></td></tr><tr><th>Context:</th><td><code>http</code>, <code>server</code>, <code>location</code><br></td></tr></tbody></table><p>This directive appeared in version 0.8.18.</p>"],
[4,"limit_conn_status","Sets the status code to return in response to rejected requests.","<p>Sets the status code to return in response to rejected requests.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_conn_status</strong> <code><i>code</i></code>;</code><br></td></tr><tr><th>Default:</th><td><pre>limit_conn_status 503;</pre></td></tr><tr><th>Context:</th><td><code>http</code>, <code>server</code>, <code>location</code><br></td></tr></tbody></table><p>This directive appeared in version 1.3.15.</p>"],
[4,"limit_conn_zone","Sets parameters for a shared memory zone that will keep states for various keys. In particular, the state includes the current number of connections. The `_key_` can contain text, variables, and their combination. Requests with an empty key value are not accounted.","<p>Sets parameters for a shared memory zone that will keep states for various keys. In particular, the state includes the current number of connections. The <code><i>key</i></code> can contain text, variables, and their combination. Requests with an empty key value are not accounted.</p><blockquote class=\"note\">Prior to version 1.7.6, a <code><i>key</i></code> could contain exactly one variable.</blockquote><p>Usage example:</p><blockquote class=\"example\"><pre>limit_conn_zone $binary_remote_addr zone=addr:10m;\n</pre></blockquote><p>Here, a client IP address serves as a key. Note that instead of <code>$remote_addr</code>, the <code>$binary_remote_addr</code> variable is used here. The <code>$remote_addr</code> variable’s size can vary from 7 to 15 bytes. The stored state occupies either 32 or 64 bytes of memory on 32-bit platforms and always 64 bytes on 64-bit platforms. The <code>$binary_remote_addr</code> variable’s size is always 4 bytes for IPv4 addresses or 16 bytes for IPv6 addresses. The stored state always occupies 32 or 64 bytes on 32-bit platforms and 64 bytes on 64-bit platforms. One megabyte zone can keep about 32 thousand 32-byte states or about 16 thousand 64-byte states. If the zone storage is exhausted, the server will return the <a href=\"https://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn_status\">error</a> to all further requests.</p><blockquote class=\"note\">Additionally, as part of our <a href=\"http://nginx.com/products/\">commercial subscription</a>, the <a href=\"https://nginx.org/en/docs/http/ngx_http_api_module.html#http_limit_conns_\">status information</a> for each such shared memory zone can be <a href=\"https://nginx.org/en/docs/http/ngx_http_api_module.html#getHttpLimitConnZone\">obtained</a> or <a href=\"https://nginx.org/en/docs/http/ngx_http_api_module.html#deleteHttpLimitConnZoneStat\">reset</a> with the <a href=\"https://nginx.org/en/docs/http/ngx_http_api_module.html\">API</a> since 1.17.7.</blockquote>",["Prior to version 1.7.6, a `_key_` could contain exactly one variable.","Additionally, as part of our [commercial subscription](http://nginx.com/products/), the [status information](ngx_http_api_module.html#http_limit_conns_) for each such shared memory zone can be [obtained](ngx_http_api_module.html#getHttpLimitConnZone) or [reset](ngx_http_api_module.html#deleteHttpLimitConnZoneStat) with the [API](ngx_http_api_module.html) since 1.17.7."],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_conn_zone</strong> <code><i>key</i></code> <code>zone</code>=<code><i>name</i></code>:<code><i>size</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>http</code><br></td></tr></tbody></table>"],
[4,"limit_zone","This directive was made obsolete in version 1.1.8 and was removed in version 1.7.6. An equivalent [limit\\_conn\\_zone](#limit_conn_zone) directive with a changed syntax should be used instead:","<p>This directive was made obsolete in version 1.1.8 and was removed in version 1.7.6. An equivalent <a href=\"https://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn_zone\">limit_conn_zone</a> directive with a changed syntax should be used instead:</p><blockquote class=\"note\"><code>limit_conn_zone</code> <code><i>$variable</i></code> <code>zone</code>=<code><i>name</i></code>:<code><i>size</i></code>;</blockquote>",["`limit_conn_zone` `_$variable_` `zone`\\=`_name_`:`_size_`;"],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>limit_zone</strong> <code><i>name</i></code> <code><i>$variable</i></code> <code><i>size</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>http</code><br></td></tr></tbody></table>"],
[5,"<p></p><dl class=\"compact\"><dt id=\"var_limit_conn_status\"><code>$limit_conn_status</code></dt><dd>keeps the result of limiting the number of connections (1.17.6): <code>PASSED</code>, <code>REJECTED</code>, or <code>REJECTED_DRY_RUN</code></dd></dl>"]
]